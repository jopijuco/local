{% extends "index.html" %}
{% from "macros.html" import form_action_method %}

{% block title %}
    account
{% endblock %}

{% block main %}

    <h4>Edit account</h4>

    {% if message %}
    <div class="alert alert-success" role="alert">
        {{ message }}
    </div>
    {% endif %}

{% if user_type == "customer" %}

    {{ form_action_method(url_for('customer_account'), "POST") }}
    {{ form.csrf_token }}

        <div class="row">
            <div class="col-md-4">
                <div class="form-group">
                    <label>First name</label>
                    <p class="form-control">{{ data["first_name"] }}</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label>Last name</label>
                    <p class="form-control">{{ data["last_name"] }}</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label>Age</label>
                    <p class="form-control">{{ data["age"] }}</p>
                </div>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-3">
                <div class="form-group">
                    {{ form.username.label }}
                    {{ form.username(class_="form-control") }}

                    {% if form.username.errors %}
                    {% for error in form.username.errors %}
                        <small class="form-text text-muted">
                        {{ error }}
                        </small>
                    {% endfor %}
                    {% endif%}
                </div>
            </div>
            <div class="col-md-5">
                <div class="form-group">
                    {{ form.email.label }}
                    {{ form.email(class_="form-control") }}

                    {% if form.email.errors %}
                    {% for error in form.email.errors %}
                        <small class="form-text text-muted">
                        {{ error }}
                        </small>
                    {% endfor %}
                    {% endif%}
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    {{ form.password.label }}
                    {{ form.password(class_="form-control") }}

                    {% if form.password.errors %}
                    {% for error in form.password.errors %}
                        <small class="form-text text-muted">
                        {{ error }}
                        </small>
                    {% endfor %}
                    {% endif%}
                </div>
            </div>
        </div>
        {{ form.update(class_="btn btn-primary") }}
    </form>
{% if not address %}
    <div class="row">
        <div class="col-md-12">
            <h5>{{ data["first_name"] }} {{ data["last_name"] }}, tell us your address so the products can be delivered to you.</h5>
            <a href="{{ url_for('add_address') }}" class="btn btn-secondary">Give address</a>
        </div>    
    </div>
{% else %}
    <hr>
    <div class="row">
        <div class="col-md-12">
            <div class="row jumbotron">
                <div class="col-12  mb-3 col-md-4 mb-md-0">
                    <div><b>Address : </b>{{ address["street"] }}</div>
                    <div><b>Number : </b>{{ address["number"] }}</div>
                    <div><b>Zip Code : </b>{{ address["zip_code"] }}</div>
                    <div><b>City : </b>{{ address["city"] }}</div>
                    <div><b>Region : </b>{{ address["region"] }}</div>
                    <div><b>Country : </b>{{ address["country"] }}</div>
                </div>
            </div>
            <a href="{{ url_for('edit_address') }}" class="btn btn-secondary">Edit address</a>
        </div>    
    </div>
{% endif %}

{% else %}
    {{ form_action_method(url_for('business_account'), "POST") }}
    {{ form.csrf_token }}

        <div class="row">
            <div class="col-md-4">
                <div class="form-group">
                    {{ form.name.label }}
                    {{ form.name(class_="form-control") }}

                    {% if form.name.errors %}
                    {% for error in form.name.errors %}
                        <small class="form-text text-muted">
                        {{ error }}
                        </small>
                    {% endfor %}
                    {% endif%}
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label>Tax number</label>
                    <p class="form-control">{{ data["fiscal_number"] }}</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label>Sector</label>
                    <p class="form-control">{{ data["designation"] }}</p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="form-group">
                    {{ form.description.label }}
                    {{ form.description(class_="form-control") }}
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <div class="form-group">
                    {{ form.phone.label }}
                    {{ form.phone(class_="form-control") }}

                    {% if form.phone.errors %}
                    {% for error in form.phone.errors %}
                        <small class="form-text text-muted">
                        {{ error }}
                        </small>
                    {% endfor %}
                    {% endif%}
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    {{ form.mobile.label }}
                    {{ form.mobile(class_="form-control") }}

                    {% if form.mobile.errors %}
                    {% for error in form.mobile.errors %}
                        <small class="form-text text-muted">
                        {{ error }}
                        </small>
                    {% endfor %}
                    {% endif%}
                </div>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-4">
                <div class="form-group">
                    {{ form.username.label }}
                    {{ form.username(class_="form-control") }}

                    {% if form.username.errors %}
                    {% for error in form.username.errors %}
                        <small class="form-text text-muted">
                        {{ error }}
                        </small>
                    {% endfor %}
                    {% endif%}
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    {{ form.email.label }}
                    {{ form.email(class_="form-control") }}

                    {% if form.email.errors %}
                    {% for error in form.email.errors %}
                        <small class="form-text text-muted">
                        {{ error }}
                        </small>
                    {% endfor %}
                    {% endif%}
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    {{ form.password.label }}
                    {{ form.password(class_="form-control") }}

                    {% if form.password.errors %}
                    {% for error in form.password.errors %}
                        <small class="form-text text-muted">
                        {{ error }}
                        </small>
                    {% endfor %}
                    {% endif%}
                </div>
            </div>
        </div>
        {{ form.update(class_="btn btn-primary") }}
    </form>
{% endif %}
{% endblock %}

{% block javascript %}
    <script type="text/javascript">
        setCurrentNavBarColor("nav-account");
    </script>
{% endblock %}